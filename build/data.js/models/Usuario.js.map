{"version":3,"sources":["../../../src/data.js/models/Usuario.js"],"names":["usuario","mongoose","Schema","String","password","nombre","rol","active","Boolean","pre","next","isModified","bcrypt","genSalt","error","salt","hash","Usuario","model"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;AAGA,IAAMA,OAAO,GAAG,IAAIC,qBAASC,MAAb,CAAoB;AAChCF,EAAAA,OAAO,EAAEG,MADuB;AAEhCC,EAAAA,QAAQ,EAAED,MAFsB;AAGhCE,EAAAA,MAAM,EAAEF,MAHwB;AAIhCG,EAAAA,GAAG,EAAEH,MAJ2B;AAKhCI,EAAAA,MAAM,EAAEC;AALwB,CAApB,CAAhB,C,CAOA;;AACAR,OAAO,CAACS,GAAR,CAAY,MAAZ,EAAoB,UAAUC,IAAV,EAAgB;AAAA;;AAChC;AACA,MAAG,CAAC,KAAKC,UAAL,CAAgB,UAAhB,CAAJ,EAAgC;AAC5B,WAAOD,IAAI,EAAX;AACH;;AACDE,qBAAOC,OAAP,CAAe,EAAf,EAAmB,UAACC,KAAD,EAAQC,IAAR,EAAiB;AAChC,QAAGD,KAAH,EAAUJ,IAAI,CAACI,KAAD,CAAJ;;AAEVF,uBAAOI,IAAP,CAAY,KAAI,CAACZ,QAAjB,EAA2BW,IAA3B,EAAiC,UAACD,KAAD,EAAOE,IAAP,EAAgB;AAC7C,UAAGF,KAAH,EAAUJ,IAAI,CAACI,KAAD,CAAJ;AACV,MAAA,KAAI,CAACV,QAAL,GAAgBY,IAAhB;AACAN,MAAAA,IAAI;AACP,KAJD;AAKH,GARD;AASH,CAdD;;AAeA,IAAMO,OAAO,GAAGhB,qBAASiB,KAAT,CAAe,UAAf,EAA0BlB,OAA1B,CAAhB;;eAEeiB,O","sourcesContent":["import mongoose from 'mongoose'\r\nimport {conectar} from './../db'\r\nimport bcrypt from 'bcrypt'\r\nconectar()\r\n\r\n\r\nconst usuario = new mongoose.Schema({\r\n    usuario: String,\r\n    password: String,\r\n    nombre: String,\r\n    rol: String,\r\n    active: Boolean\r\n})\r\n//hashear los passwords\r\nusuario.pre('save', function (next) {\r\n    //si el password no esta modificado\r\n    if(!this.isModified('password')){\r\n        return next();\r\n    }\r\n    bcrypt.genSalt(10, (error, salt) => {\r\n        if(error) next(error)\r\n        \r\n        bcrypt.hash(this.password, salt, (error,hash) => {\r\n            if(error) next(error)\r\n            this.password = hash;\r\n            next(); \r\n        })\r\n    })\r\n})\r\nconst Usuario = mongoose.model('usuarios',usuario)\r\n\r\nexport default Usuario;"],"file":"Usuario.js"}